<div class="form-screen">
  <div class="row justify-content-center">
    <div class="col-md-4 border shadow-sm mt-4 p-4">
      <h1 class="text-center">MES PREFERENCES</h1>
      <%= simple_form_for @seance, html: { class: 'custom-form' } do |f| %>
        <%= f.input :seance_type, label: 'Type', collection: ['Film', 'S√©rie'], prompt: 'S√©lectionnez un type', input_html: { class: 'form-control' } %>
        <div id="genre-input">
          <%= f.input :genre, collection: @genres, prompt: 'S√©lectionnez un genre', input_html: { class: 'form-control' } %>
        </div>
        <div id="keyword-input" style="display: none;">
          <%= f.input :keyword, label: "Mot-cl√©", input_html: { class: 'form-control' } %>
        </div>
        <a href="#" id="advanced-search-toggle">recherche avanc√©e üîç</a>

        <!-- Les champs cach√©s pour la recherche avanc√©e -->
        <div id="advanced-search-fields" style="display: none;">
          <div class="form-check">
            <%= f.radio_button :search_type, 'genre', id: 'search-by-genre', checked: true %>
            <%= f.label :search_type_genre, 'Rechercher par genre' %>
          </div>
          <div class="form-check">
            <%= f.radio_button :search_type, 'keyword', id: 'search-by-keyword' %>
            <%= f.label :search_type_keyword, 'Rechercher par mot-cl√©' %>
          </div>
          <%= f.input :year, label: 'Ann√©e', as: :select, collection: (1980..2024).to_a.reverse, prompt: 'S√©lectionnez une ann√©e', input_html: { class: 'form-control' } %>
          <%= f.input :actor, label: 'Acteur', collection: @actors, prompt: 'S√©lectionnez un acteur', input_html: { class: 'form-control' } %>
          <%= f.input :runtime, label: 'Dur√©e', collection: [['Moins de 60 min', 60], ['Moins de 90 min', 90], ['Moins de 120 min', 120]], prompt: 'S√©lectionnez une dur√©e', input_html: { class: 'form-control' } %>
          <%= f.input :origin_country, label: "Pays d'origine", collection: @origin_country, prompt: 'S√©lectionnez un pays', input_html: { class: 'form-control' } %>
        </div>

        <%= f.submit "Rechercher", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    $('#advanced-search-toggle').click(function (e) {
      e.preventDefault();
      $('#advanced-search-fields').slideToggle();
    });
  });
</script>

<script>
  $(document).ready(function () {
    function toggleInputs() {
      if ($('#search-by-genre').is(':checked')) {
        $('#genre-input').show();
        $('#keyword-input').hide();
        $('#seance_keyword').prop('disabled', false);
      } else {
        $('#genre-input').hide();
        $('#keyword-input').show();
        $('#seance_genre').prop('disabled', false);
      }
    }


    toggleInputs();


    $('input[name="seance[search_type]"]').change(function () {
      toggleInputs();
    });
  });
</script>
